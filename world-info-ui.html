<div id="nemo-world-info-redesign" class="nemo-extension nemo-world-info-container nemo-preset-navigator-content-wrapper">
    <div class="navigator-body">
        <!-- Left Column: Lorebook List and Management -->
        <div class="nemo-world-info-left-column">
            <div class="nemo-world-info-mobile-header">
                <button id="nemo-world-info-close-left-panel" class="menu_button menu_button_icon fa-solid fa-times" title="Close Panel"></button>
            </div>
            <div class="nemo-world-info-active-section">
                <div class="nemo-world-info-active-header">Active Lorebooks</div>
                <div id="nemo-world-info-active-list" class="nemo-world-info-active-list">
                    <!-- Active lorebooks will be dynamically inserted here -->
                </div>
            </div>
            <div class="nemo-world-info-preset-section">
                <div class="nemo-world-info-preset-header">Presets</div>
                <div class="nemo-world-info-preset-controls">
                    <select id="nemo-world-info-preset-select" class="text_pole"></select>
                    <div id="nemo-world-info-preset-rename" class="menu_button menu_button_icon fa-solid fa-pencil" title="Rename Preset"></div>
                    <div id="nemo-world-info-preset-update" class="menu_button menu_button_icon fa-solid fa-save" title="Update Preset"></div>
                    <div id="nemo-world-info-preset-new" class="menu_button menu_button_icon fa-solid fa-file-circle-plus" title="New Preset"></div>
                    <div id="nemo-world-info-preset-import" class="menu_button menu_button_icon fa-solid fa-file-import" title="Import Preset"></div>
                    <div id="nemo-world-info-preset-export" class="menu_button menu_button_icon fa-solid fa-file-export" title="Export Preset"></div>
                    <div id="nemo-world-info-preset-delete" class="menu_button menu_button_icon fa-solid fa-trash-can redWarningBG" title="Delete Preset"></div>
                </div>
            </div>
            <div class="nemo-world-info-list-header">
                <input type="search" id="nemo-world-info-search" placeholder="Search lorebooks..." class="text_pole">
                <div id="nemo-world-info-new-button" class="menu_button interactable" tabindex="0">New</div>
                <div id="nemo-world-info-import-button" class="menu_button interactable" tabindex="0">Import</div>
                <div id="nemo-world-info-new-folder-button" class="menu_button interactable" tabindex="0">New Folder</div>
                <div class="nemo-move-toggle-container">
                    <input type="checkbox" id="nemo-world-info-move-toggle">
                    <label for="nemo-world-info-move-toggle">Move</label>
                </div>
            </div>
            <div id="nemo-world-info-list" class="nemo-world-info-list">
                <!-- Lorebooks will be dynamically inserted here -->
            </div>
        </div>

        <!-- Fixed Toggle Button -->
        <button id="nemo-world-info-toggle-left-panel" class="menu_button menu_button_icon fa-solid fa-sidebar" title="Toggle Left Panel"></button>
        
        <!-- Right Column: Workspace (Entries and Settings) -->
        <div class="nemo-world-info-right-column">
            <div class="navigator-main-panel">
                <div id="navigator-grid-header">
                <div class="nemo-world-info-tabs">
                    <div id="nemo-world-info-entries-tab" class="nemo-world-info-tab active">Entries</div>
                    <div id="nemo-world-info-active-entries-tab" class="nemo-world-info-tab">Active Entries</div>
                    <div id="nemo-world-info-order-helper-tab" class="nemo-world-info-tab">Order Helper</div>
                    <div id="nemo-world-info-lore-simulator-tab" class="nemo-world-info-tab">Lore Simulator</div>
                    <div id="nemo-world-info-settings-tab" class="nemo-world-info-tab">Settings</div>
                </div>
            </div>
            <div id="nemo-world-info-entries-panel" class="nemo-world-info-panel active">
                <div class="nemo-panel-content-wrapper">
                    <div class="nemo-world-info-entries-header">
                        <div id="nemo-world-info-entry-new" class="menu_button menu_button_icon fa-solid fa-plus interactable" title="New Entry" data-i18n="[title]New Entry" tabindex="0"></div>
                        <div id="nemo-world-info-entry-rename" class="menu_button menu_button_icon fa-solid fa-pencil interactable" title="Rename World Info" data-i18n="[title]Rename World Info" tabindex="0"></div>
                    <div id="nemo-world-info-entry-duplicate" class="menu_button menu_button_icon fa-solid fa-paste interactable" title="Duplicate World Info" data-i18n="[title]Duplicate World Info" tabindex="0"></div>
                    <div id="nemo-world-info-entry-export" class="menu_button menu_button_icon fa-solid fa-file-export interactable" title="Export World Info" data-i18n="[title]Export World Info" tabindex="0"></div>
                    <div id="nemo-world-info-entry-delete" class="menu_button menu_button_icon fa-solid fa-trash-can redWarningBG interactable" title="Delete World Info" data-i18n="[title]Delete World Info" tabindex="0"></div>
                    <div id="nemo-world-info-entry-open-all" class="menu_button menu_button_icon fa-solid fa-expand interactable" title="Open all Entries" data-i18n="[title]Open all Entries" tabindex="0"></div>
                    <div id="nemo-world-info-entry-close-all" class="menu_button menu_button_icon fa-solid fa-compress interactable" title="Close all Entries" data-i18n="[title]Close all Entries" tabindex="0"></div>
                    <div id="nemo-world-info-entry-fill-memos" class="menu_button menu_button_icon fa-solid fa-notes-medical interactable" title="Fill empty Memo/Titles with Keywords" data-i18n="[title]Fill empty Memo/Titles with Keywords" tabindex="0"></div>
                    <div id="nemo-world-info-entry-apply-sort" class="menu_button menu_button_icon fa-solid fa-arrow-down-9-1 interactable" title="Apply current sorting as Order" data-i18n="[title]Apply current sorting as Order" tabindex="0"></div>
                    <div id="nemo-world-info-entry-macro-picker" class="menu_button menu_button_icon fa-solid fa-code interactable" title="Macro Picker" data-i18n="[title]Macro Picker" tabindex="0"></div>
                    <input type="search" class="text_pole textarea_compact" data-i18n="[placeholder]Search..." id="nemo-world-info-entry-search" placeholder="Search...">
                    <select id="nemo-world-info-entry-sort" class="text_pole margin0"></select>
                    <div id="nemo-world-info-entry-refresh" class="menu_button menu_button_icon fa-solid fa-arrows-rotate interactable" title="Refresh" data-i18n="[title]Refresh" tabindex="0"></div>
                    <select id="nemo-world-info-buffer-size" class="text_pole">
                        <option value="60">60 (Default)</option>
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="500">500</option>
                        <option value="1000">1000</option>
                    </select>
                </div>
                <div id="world_info_pagination" class="pagination-container"></div>
                    <div id="world_popup_entries_list" class="list-group">
                        <!-- Entries will be dynamically inserted here -->
                    </div>
                </div>
            </div>
            <div id="nemo-macro-picker-modal" class="nemo-modal" style="display: none;">
                <div class="nemo-modal-content">
                    <span class="nemo-modal-close">&times;</span>
                    <h2>World Info Macro Picker</h2>
                    <div id="nemo-macro-picker-list"></div>
                </div>
            </div>
            <div id="nemo-world-info-settings-panel" class="nemo-world-info-panel">
                <div class="nemo-panel-content-wrapper">
                    <!-- Global activation settings will be placed here -->
                </div>
            </div>
            <div id="nemo-world-info-active-entries-panel" class="nemo-world-info-panel">
                <div class="nemo-panel-content-wrapper">
                    <p>This panel displays the currently active World Info entries, which will be injected into the prompt.</p>
                    <div class="nemo-world-info-active-entries-header">
                        <label><input type="checkbox" id="nemo-active-entries-group-by-book"> Group by Book</label>
                        <label><input type="checkbox" id="nemo-active-entries-show-in-order"> Show in Order</label>
                    </div>
                    <div id="nemo-world-info-active-entries-list" class="list-group"></div>
                </div>
            </div>
            <div id="nemo-world-info-order-helper-panel" class="nemo-world-info-panel">
                <div class="nemo-panel-content-wrapper">
                    <p>This tool helps to re-order entries across all active lorebooks. Drag and drop the entries to re-order them, then click "Apply" to set the new order values.</p>
                    <div class="nemo-world-info-order-helper-header">
                        <label>Start: <input type="number" id="nemo-order-helper-start" value="100"></label>
                        <label>Step: <input type="number" id="nemo-order-helper-step" value="10"></label>
                        <label><input type="checkbox" id="nemo-order-helper-descending"> Descending</label>
                        <button id="nemo-order-helper-apply" class="menu_button">Apply</button>
                    </div>
                    <div id="nemo-world-info-order-helper-list" class="list-group"></div>
                </div>
            </div>
            <div id="nemo-world-info-lore-simulator-panel" class="nemo-world-info-panel">
                <div class="nemo-panel-content-wrapper">
                    <p>Enter text below to see which lorebook entries would be activated. This uses the currently selected active lorebooks.</p>
                    <textarea id="nemo-lore-simulator-input" class="text_pole" rows="10" placeholder="Type your test message here..."></textarea>
                    <div id="nemo-lore-simulator-results-header">
                        <h4>Activated Entries:</h4>
                    </div>
                    <div id="nemo-lore-simulator-results" class="list-group"></div>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
</div>